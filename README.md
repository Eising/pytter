# Pytter
A really simple library for Python to generating reverse DNS.

It's meant to be used if you are parsing IP/Hostname mappings from an external
source, and want to export reverse zones from that.

# Examples

## Code

```python
import pytter

rd = pytter.Pytter('my.dns.server.', 'hostmaster.my.dns.')

rd.add_reverse("10.0.0.1", "1.my.domain.name.")
rd.add_reverse("10.1.0.3", "3.my.domain.name.")
rd.add_reverse("10.1.0.4", "4.my.domain.name.")
rd.add_reverse("2001:db8::1", "1.my.domain.name.")

rd.dump_zones(".")
```

This dumps reverse zones in "." for each /24 or /48 network depending on
whether it's IPv4 or IPv6. If you call `dump_zones()` without arguments, zones
are dumped to stdout.

## Arguments

The Pytter object is constructed as such:

```python
    def __init__(self, primary_server, email, nameservers=[],
                 default_ttl=86400, refresh=14400, retry=1800, expire=1209600,
                 minimum_ttl=3600, soa_ttl=1800)
```

These arguments are defined like this:

```python
'default_ttl' : 86400, # TTL to set as $TTL
'primary_server' : None, # The hostname for the primary DNS server
'email' : None, # The email address in DNS style
'refresh' : 14400, # Time to Refresh
'retry' : 1800, # Time to Retry
'expire' : 1209600, # Time to Expire
'minimum_ttl' : 3600, # Minimum Time to Live
'soa_ttl' : 1800, # The TTL of the SOA record
'nameservers' : [], # Additional NS records
```

## Setting the Serial

The serial of the zones are automatically set to YYYYMMDD00, but can be set to
whatever you want.

```python

rd = pytter.Pytter(config)

rd.serialnumber = time.strftime("%Y%m%d01")

```

## Zone aggregation

Normally zones are considered to follow a /24 boundary for IPv4 and /48 for
IPv6. You may want to change this for IPv6, if you are generating reverse for,
say a /32 or larger. Set the `aggregate_v6` value for this (or
`aggregate_v4` for IPv4).

```python
rd = pytter.Pytter(config)

rd.aggregate_v6 = 32
```

## Additional nameservers

You would normally have a backup NS, and that can be defined as such:

```python
import pytter

rd = pytter.Pytter('primary.dns.server.', 'hostmaster.dns.server.',
'backup.dns.server')
```
Or if multiple:
```python
import pytter

alt_dns_servers = ['ns2.mynet.com', 'ns3.mynet.com']

rd = pytter.Pytter('primary.dns.server.', 'hostmaster.dns.server.',
alt_dns_servers)
```
# Example zone output

The zone generated will look something like this:

```
; 0.1.10.in-addr.arpa - generated by pytter.
$TTL 86400
@ 1800  IN       SOA      server.mydomain. hostmaster.mydomain. (
                                2016061601 ; Serial number
                                     14400 ; Refresh
                                      1800 ; Retry
                                   1209600 ; Expire
                                      3600 ); Minimum TTL
                 NS       server.mydomain.
4.0.1.10.in-addr.arpa.               PTR     4.my.domain.name.
3.0.1.10.in-addr.arpa.               PTR     3.my.domain.name.
```

# Empty zones
If for some reason you need to create an empty zone, you can do this also:

```
pytter.generate_empty_zone(filename)
```

# Contact and disclaimer

This library is not meant for serious work. If it's working for you, fine, but
I make no guarantees.

If you want to reach out to me, you can do so at eising (at) nordu.net
